<!DOCTYPE html>
<html lang="ja" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Sample3_03</title>
<style type="text/css">
  img{
    width: 200px;
    height: auto;
  }
</style>
  </head>
  <body>
    <h2>30H_JSのねこ先生</h2>
    <p id="message">JavaScriptは面白いですか？</p>
    <input type="button" value="とっても！" onclick="disp()">
    <input type="button" value="ちょっとむずかしい・・・" onclick="dispYell()"><br>
    <img id="teacherImg" src="./images/yellow6.png" alt="ねこ先生">
<script type="text/javascript">
  let isDisp = false;                   //表示しているかどうか
  let repeat;                           //タイマー関数のid取得用
  let disp = function(){                //タイマー処理のID
    if (repeat){
      clearTimeout(repeat);
    }
    let pMessage = document.getElementById('message');
    if ( isDisp == true ){
      pMessage.innerHTML = "それは良かったです";
      isDisp = false;
    }else{
      pMessage.innerHTML = "<br>";
      isDisp = true;
    }
    repeat = setTimeout("disp()", 500);
  }
  let yellMessage = "私ももっとがんばりま～す";
  let yellIndex = 1;
  let dispYell = function(){
    if (repeat){
      clearTimeout(repeat);
    }
    let pMessage = document.getElementById("message");
    pMessage.innerHTML = yellMessage.substring(0, yellIndex);
    yellIndex++;
    if (yellIndex > yellMessage.length){
      yellIndex = 1;
    }
    repeat = setTimeout("dispYell()", 500);
  }
</script>
  </body>
</html>
